<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUMINA - Moda Femenina Elegante</title>
    <meta name="description" content="Descubre nuestra colección exclusiva de moda femenina. Vestidos, blusas, pantalones y más con diseños premium.">
    
    <!-- Preconexiones para mejor rendimiento -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Barra de navegación -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="brand-logo">LUMINA</a>
            
            <div class="navbar-links">
                <a href="#inicio" class="nav-link">Inicio</a>
                <a href="#productos.html" class="nav-link">Productos</a>
                <a href="#testimonios" class="nav-link">Testimonios</a>
                <a href="#contacto" class="nav-link">Contacto</a>
                <a href="login.html" class="nav-icon" aria-label="Mi cuenta">
                    <i class="fas fa-user"></i>
                </a>
                <a href="carrito.html" class="nav-icon cart-icon" aria-label="Carrito">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-badge">0</span>
                </a>
            </div>
            
            <button class="menu-toggle" aria-label="Menú" aria-expanded="false">
                <span class="menu-bar"></span>
                <span class="menu-bar"></span>
                <span class="menu-bar"></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>ELEGANCIA <span>ATEMPORAL</span></h1>
            <p class="hero-subtitle">Descubre nuestra nueva colección Primavera-Verano 2023</p>
            <div class="hero-buttons">
                <a href="#productos" class="btn-primary">Ver productos</a>
                <a href="#contacto" class="btn-secondary">Contacto</a>
            </div>
        </div>
    </section>

    <!-- Sección de Productos Destacados -->
    <section id="productos" class="featured-products">
        <div class="section-header">
            <h2>PRODUCTOS <span>DESTACADOS</span></h2>
            <p class="section-description">Los artículos más populares de nuestro catálogo</p>
        </div>
        
        <div class="featured-products-grid" id="featuredProducts">
            <!-- Los productos se cargarán dinámicamente aquí -->
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i> Cargando productos...
            </div>
        </div>
    
        <div class="section-footer">
            <a href="productos.html" class="view-all-btn">Ver todos los productos</a>
        </div>
    </section>

    <!-- Sección de Testimonios -->
    <section id="testimonios" class="testimonials-section">
        <div class="section-header">
            <h2>OPINIONES DE <span>CLIENTAS</span></h2>
            <p class="section-description">Lo que dicen quienes visten nuestros diseños</p>
        </div>
        
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"El vestido que compré superó todas mis expectativas. La calidad del tejido y los acabados son impecables."</p>
                </div>
                <div class="testimonial-author">
                    <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="María González" loading="lazy">
                    <div class="author-info">
                        <h4>María González</h4>
                        <span>Clienta desde 2021</span>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="testimonial-text">"Las blusas han sido un cambio radical para mi guardarropa. Son versátiles y se mantienen perfectas después de muchos lavados."</p>
                </div>
                <div class="testimonial-author">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Ana Rodríguez" loading="lazy">
                    <div class="author-info">
                        <h4>Ana Rodríguez</h4>
                        <span>Estilista</span>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"La calidad de los pantalones es excepcional. Después de 2 años de uso frecuente, se ven como nuevos."</p>
                </div>
                <div class="testimonial-author">
                    <img src="https://randomuser.me/api/portraits/women/75.jpg" alt="Laura Fernández" loading="lazy">
                    <div class="author-info">
                        <h4>Laura Fernández</h4>
                        <span>Bloguera de moda</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Contacto -->
    <section id="contacto" class="contact-section">
        <div class="contact-container">
            <div class="contact-info">
                <h2>CONTÁCTANOS</h2>
                <p>¿Tienes preguntas sobre nuestros productos? Estamos aquí para ayudarte.</p>
                
                <div class="contact-details">
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Calle Moda 123, Barcelona</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+34 123 456 789</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>hola@luminamoda.com</span>
                    </div>
                </div>
                
                <div class="social-links">
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            
            <div class="contact-form">
                <h3>Envíanos un mensaje</h3>
                <form id="contactForm">
                    <div class="form-group">
                        <input type="text" id="name" placeholder="Nombre" required>
                        <div class="error-message" id="nameError"></div>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" placeholder="Correo electrónico" required>
                        <div class="error-message" id="emailError"></div>
                    </div>
                    <div class="form-group">
                        <textarea id="message" placeholder="Tu mensaje" rows="5" required></textarea>
                        <div class="error-message" id="messageError"></div>
                    </div>
                    <button type="submit" class="btn-primary">
                        <span class="btn-text">Enviar mensaje</span>
                        <span class="spinner hidden"></span>
                    </button>
                    <div id="formSuccess" class="form-success hidden">
                        <i class="fas fa-check-circle"></i>
                        <span>¡Mensaje enviado con éxito!</span>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3 class="footer-logo">LUMINA</h3>
                    <p class="footer-description">Moda femenina elegante y atemporal para la mujer moderna.</p>
                </div>
                
                <div class="footer-column">
                    <h4>Enlaces rápidos</h4>
                    <ul class="footer-links">
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#productos">Productos</a></li>
                        <li><a href="#testimonios">Testimonios</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Políticas</h4>
                    <ul class="footer-links">
                        <li><a href="#">Términos y condiciones</a></li>
                        <li><a href="#">Política de privacidad</a></li>
                        <li><a href="#">Garantías</a></li>
                        <li><a href="#">Envíos y devoluciones</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Métodos de pago</h4>
                    <div class="payment-methods">
                        <i class="fab fa-cc-visa" aria-label="Visa"></i>
                        <i class="fab fa-cc-mastercard" aria-label="Mastercard"></i>
                        <i class="fab fa-cc-paypal" aria-label="PayPal"></i>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="copyright">&copy; 2023 LUMINA. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Configuración inicial -->
    <script>
      // Tu configuración de Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyA4wz7tEXQ8rcpcoGypzVmVNQ_m8jH7zzA",
        authDomain: "ironstrength-gymequipment.firebaseapp.com",
        projectId: "ironstrength-gymequipment",
        storageBucket: "ironstrength-gymequipment.appspot.com",
        messagingSenderId: "710205438519",
        appId: "1:710205438519:web:897375a5f6b5d7eec99db2"
      };
    
      // Inicialización
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
    
      // Hacer disponible globalmente
      window.db = firebase.firestore();
      console.log("Firebase inicializado correctamente");
    </script>

    <!-- Script para cargar productos destacados -->
    <script>
    async function loadFeaturedProducts() {
      const container = document.getElementById('featuredProducts');
      
      try {
        console.log("[1] Iniciando carga...");
        
        const snapshot = await firebase.firestore()
          .collection('products')
          .where('featured', '==', true)
          .limit(4)
          .get();
        
        console.log("[2] Productos obtenidos:", snapshot.docs.length);
        
        if (snapshot.empty) {
          container.innerHTML = `
            <div class="no-products">
              <i class="fas fa-tshirt"></i>
              <p>No hay productos destacados disponibles</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = snapshot.docs.map(doc => {
          const data = doc.data();
          return `
            <div class="featured-product-card">
              <div class="product-image">
                <img src="${data.imageUrl || 'img/default.jpg'}" 
                     alt="${data.name}" 
                     loading="lazy"
                     onerror="this.src='img/default.jpg'">
                ${data.featured ? '<span class="featured-badge">Destacado</span>' : ''}
              </div>
              <div class="product-info">
                <h3>${data.name}</h3>
                <div class="price-section">
                  <span class="price">$${(data.price || 0).toFixed(2)}</span>
                  ${data.rating ? `<div class="stars">${'★'.repeat(Math.round(data.rating))}</div>` : ''}
                </div>
                <a href="producto.html?id=${doc.id}" class="btn">Ver detalles</a>
              </div>
            </div>
          `;
        }).join('');
        
      } catch (error) {
        console.error("[3] Error:", error);
        container.innerHTML = `
          <div class="error-message">
            <i class="fas fa-exclamation-triangle"></i>
            <p>Error al cargar productos</p>
            <button onclick="loadFeaturedProducts()" class="btn-retry">Reintentar</button>
          </div>
        `;
      }
    }
  
    // Iniciar carga cuando el DOM esté listo
    document.addEventListener('DOMContentLoaded', loadFeaturedProducts);
    </script>
    
    <!-- Script para el formulario de contacto -->
    <script>
    document.getElementById('contactForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      e.stopImmediatePropagation();
      
      const form = e.target;
      const submitBtn = form.querySelector('button[type="submit"]');
      const spinner = submitBtn.querySelector('.spinner');
      const btnText = submitBtn.querySelector('.btn-text');
      const successEl = document.getElementById('formSuccess');
      
      try {
        // Mostrar spinner
        btnText.classList.add('hidden');
        spinner.classList.remove('hidden');
        submitBtn.disabled = true;
        
        // Obtener valores
        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const message = form.message.value.trim();
        
        // Validación
        if (!name || !email || !message) {
          throw new Error('Por favor completa todos los campos');
        }
        
        // Guardar en Firestore
        await db.collection('contactMessages').add({
          name: name,
          email: email,
          message: message,
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
          status: 'unread'
        });
        
        // Mostrar éxito
        successEl.classList.remove('hidden');
        form.reset();
        
        // Ocultar mensaje después de 5 segundos
        setTimeout(() => successEl.classList.add('hidden'), 5000);
        
      } catch (error) {
        console.error('Error al enviar:', error);
        const errorEl = document.getElementById('messageError');
        if (errorEl) {
          errorEl.textContent = error.message;
          errorEl.classList.remove('hidden');
          setTimeout(() => errorEl.classList.add('hidden'), 5000);
        }
      } finally {
        // Restaurar botón
        btnText.classList.remove('hidden');
        spinner.classList.add('hidden');
        submitBtn.disabled = false;
      }
    });
    </script>
</body>
</html>